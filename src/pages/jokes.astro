---
import CardCarousel from "../components/CardCarousel.astro";
// import jokes from "../content/jokes.json";
import MainLayout from "../layouts/MainLayout.astro";

import type { SanityDocument } from "@sanity/client";
import {sanityClient} from 'sanity:client';

const JOKES_QUERY = `*[
  _type == "joke"
]`;

// Get the jokes and shuffle them for a random order on each page load
const data = await sanityClient.fetch<SanityDocument[]>(JOKES_QUERY);

const shuffledJokes = data.sort(() => Math.random() - 0.5);
---

<MainLayout title="ðŸ˜‚ Jokes" pathname={Astro.url.pathname}>
    <p class="has-text-centered">
        Take a break and have a laugh with our collection of jokes!
    </p>
    <CardCarousel data={shuffledJokes} buttonText="ðŸŽ² Another Joke" />
</MainLayout>
